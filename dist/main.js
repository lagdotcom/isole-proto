!function(t){var i={};function e(s){if(i[s])return i[s].exports;var r=i[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=i,e.d=function(t,i,s){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var r in t)e.d(s,r,function(i){return t[i]}.bind(null,r));return s},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="",e(e.s=1)}([function(t,i,e){t.exports=e.p+"28b96b0886226a4e217eee0f393a1d7e.png"},function(t,i,e){"use strict";e.r(i);const s=.2,r=5,o=Math.PI,n=2*o,a=o/2;function h(t){return(t%=n)<0&&(t+=n),t}function c(t,i){var e=t-i;return e>o?e-=n:e<-o&&(e+=n),Math.abs(e)}function l(t,i){return{x:Math.cos(t)*i,y:Math.sin(t)*i}}function u(t,i){return t/i*s}function p(t){return n*t/360}function d(t,i,e,s,r){Object.assign(this,{game:t,r:i,a:p(e),width:p(s)/2,motion:p(r||0)})}d.prototype.update=function(t){this.motion&&(this.a=h(this.a+t*this.motion))},d.prototype.draw=function(t){const{r:i,a:e,width:s}=this,{cx:r,cy:o}=this.game;t.strokeStyle="#888888",t.beginPath(),t.arc(r,o,i,e-s,e+s),t.stroke()};function f(t,i){Object.assign(this,{game:t,w:56,h:30,steph:10,a:3*a,r:200,va:0,vr:0,vfa:0,vfr:0,jumpt:0,tscale:0,del:document.createElement("div")}),this.sprite={img:i,w:56,h:48,c:Math.floor(2*Math.random()),r:0,xo:-28,yo:-39,xs:-1,ys:1,m:0,n:8,rx:8},this.del=document.createElement("div"),document.body.appendChild(this.del)}function m(t,i,e,s,o,n){const a=h(p(s)),c=i-r,l=e+r;Object.assign(this,{game:t,top:c,bottom:l,a:a,direction:o,motion:p(n)}),this.updateXY()}f.prototype.update=function(t){var{a:i,r:e,va:s,vr:r,vfa:n,game:a}=this;const{walls:l,ceilings:u,floors:p,keys:d}=a,f=t/10;this.tscale=f;const{b:m,t:w,s:y}=this.getHitbox();var g="",x=[],b=null;r<=0&&(x.push("down"),p.forEach((t,e)=>{var s=c(i,t.a);g+=`f${e}: r=${t.r.toFixed(2)}, da=${s.toFixed(2)}πr<br>`,m.r<=t.r&&y.r>=t.r&&s<t.width+y.aw&&(b=t)}));var v=null;r>0&&(x.push("up"),u.forEach((t,e)=>{var s=c(i,t.a);g+=`c${e}: r=${t.r.toFixed(2)}, da=${s.toFixed(2)}πr<br>`,m.r<=t.r&&w.r>=t.r&&s<t.width+w.aw&&(v=t)}),v&&(x.push("ceiling"),r=0));var j=null;if(Math.abs(s)>.005||a.wallsInMotion){x.push("sideways");const t=Math.sign(s+n);l.forEach(i=>{(t==i.direction||i.motion)&&m.al<=i.a&&m.ar>=i.a&&w.r>=i.bottom&&m.r<=i.top&&(j=i)})}this.jumpt-=f,b&&this.jumpt<=0?(this.grounded=!0,e=b.r,r=0,s*=.8,n=b.motion*t):(this.grounded=!1,this.floor=null,r-=.2,n=0);var M=[],k=this.grounded?.09:.01;if(d.ArrowLeft?(s-=k,M.push("left"),this.sprite.xs=-1):d.ArrowRight&&(s+=k,M.push("right"),this.sprite.xs=1),d.ArrowUp&&b&&(r+=5,this.jumpt=8,M.push("jump")),j&&!v){x.push("wall");const t=-.01*j.direction;1==j.direction?(i=j.a-m.aw,s>t&&(s=t)):(i=j.a+m.aw,s<-t&&(s=-t))}else s>.3?s=.3:s<-.3&&(s=-.3);this.va=s,this.vfa=n,this.vr=r,i+=s/e*f*10+n,(e+=r*f)<0&&(e-=e,i+=o),this.a=h(i),this.r=e,this.grounded?Math.abs(s)<.005?this.sprite.r=0:(this.sprite.m+=f,this.sprite.m>this.sprite.n&&(this.sprite.m-=this.sprite.n,this.sprite.r++,this.sprite.r>=this.sprite.rx&&(this.sprite.r=0))):0!=this.sprite.r&&4!=this.sprite.r||this.sprite.r++,this.jumpt>0&&x.push("jump"),this.grounded&&x.push("grounded"),this.del.innerHTML=function(){for(var t="",i=0;i<arguments.length;i++)i&&(t+="<br>"),t+=arguments[i];return t}(`controls: ${M.join(" ")}`,`flags: ${x.join(" ")}`,`vel: ${r.toFixed(2)},${s.toFixed(2)}πr`,`pos: ${e.toFixed(2)},${i.toFixed(2)}πr`,g)},f.prototype.draw=function(t){const{a:i,r:e,game:s,sprite:r}=this,{cx:o,cy:n}=s,h=i+a,{x:c,y:u}=l(i,e);t.translate(c+o,u+n),t.rotate(h);const p=r.w*r.c,d=r.h*r.r;t.scale(r.xs,r.ys),t.drawImage(r.img,p,d,r.w,r.h,r.xo,r.yo,r.w,r.h),t.scale(r.xs,r.ys),t.rotate(-h),t.translate(-c-o,-u-n),s.options.showHitboxes&&this.drawHitbox(t)},f.prototype.drawHitbox=function(t){const{game:i}=this,{cx:e,cy:s}=i,{b:r,t:o,s:n}=this.getHitbox();t.strokeStyle="#ffff00",t.beginPath(),t.arc(e,s,r.r,r.al,r.ar),t.arc(e,s,o.r,o.ar,o.al,!0),t.arc(e,s,r.r,r.al,r.ar),t.stroke(),t.strokeStyle="#ff0000",t.beginPath(),t.arc(e,s,r.r,r.al,r.ar),t.arc(e,s,n.r,n.ar,n.al,!0),t.arc(e,s,r.r,r.al,r.ar),t.stroke()},f.prototype.getHitbox=function(){const{r:t,a:i,va:e,vr:s,w:r,h:o,steph:n,tscale:a}=this,h=u(r,t),c=u(r,t+o),l=u(r,t+n);var p,d=0,f=0;return s>0?f=s:s<0&&(d=s),{b:{r:t+d,aw:h,al:(p=a?i+e/t*a*10:i)-h,ar:p+h},t:{r:t+o+f,aw:c,al:p-c,ar:p+c},s:{r:t+n+f,aw:l,al:p-l,ar:p+l}}},m.prototype.updateXY=function(){const t=l(this.a,this.top),i=l(this.a,this.bottom);this.sx=t.x,this.sy=t.y,this.ex=i.x,this.ey=i.y},m.prototype.update=function(t){this.motion&&(this.a=h(this.a+t*this.motion),this.updateXY())},m.prototype.draw=function(t){const{game:i,sx:e,sy:s,ex:r,ey:o}=this,{cx:n,cy:a}=i;t.strokeStyle="#888888",t.beginPath(),t.moveTo(e+n,s+a),t.lineTo(r+n,o+a),t.stroke()};var w,y=e(0),g=e.n(y);function x(t){const{width:i,height:e,scale:s}=t;this.running=!1,this.options=t,this.cx=i/2/s,this.cy=e/2/s,this.keys={},this.canvas=this.makeCanvas(),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.scale(s,s),this.time=0,this.start=this.start.bind(this),this.next=this.next.bind(this),this.loading=0,this.resources=[],this.require("player",g.a)}x.prototype.require=function(t,i){const e=this;var s=document.createElement("img");s.onload=(()=>{e.loading--}),s.src=i,this.resources[t]=s,this.loading++},x.prototype.begin=function(){this.floors=[],this.ceilings=[],this.walls=[];this.addPlatform(225,225,60,45,.04),this.addPlatform(225,45,240,45,.04),this.addPlatform(135,135,320,45,-.04),this.walls.push(new m(this,180,135,350,1)),this.walls.push(new m(this,180,135,10,-1)),this.floors.push(new d(this,45,0,360)),this.player=new f(this,this.resources.player),this.components=function(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(arguments[i]);return t}(this.floors,this.ceilings,this.walls,[this.player])},x.prototype.makeCanvas=function(){const{width:t,height:i}=this.options;var e=document.createElement("canvas");return e.width=t,e.height=i,document.body.appendChild(e),e},x.prototype.addPlatform=function(t,i,e,s,r=0){this.floors.push(new d(this,t,i,e,r)),this.ceilings.push(new d(this,t-s,i,e,r)),this.walls.push(new m(this,t,t-s,i-e/2,1,r)),this.walls.push(new m(this,t,t-s,i+e/2,-1,r))},x.prototype.start=function(){this.loading?requestAnimationFrame(this.start):(this.player||this.begin(),this.running=!0,this.wallsInMotion=!0,requestAnimationFrame(this.next))},x.prototype.next=function(t){const{width:i,height:e,showFps:s}=this.options,r=t-this.time;var o=this.context;o.fillStyle="#000000",o.fillRect(0,0,i,e),s&&(o.fillStyle="#ffffff",o.fillText(Math.floor(1e3/r)+"fps",10,10)),this.components.forEach(t=>t.update(r)),this.components.forEach(t=>t.draw(o)),this.time=t,this.running&&requestAnimationFrame(this.next)},x.prototype.press=function(t){this.keys[t]=!0},x.prototype.release=function(t){this.keys[t]=!1},window.addEventListener("load",()=>{w=new x({width:1024,height:768,scale:1,showFps:!0,showHitboxes:!0}),window.G=w,w.start()}),window.addEventListener("keydown",t=>{w&&w.press(t.code)}),window.addEventListener("keyup",t=>{w&&w.release(t.code)})}]);